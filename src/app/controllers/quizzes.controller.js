// Generated by CoffeeScript 1.10.0
(function() {
  angular.module('alMakinah')
  .controller('quizzesController', quizzesController);

  function quizzesController($scope, $http, toastr, QuizzesService, $stateParams) {
    var vm = this;
    vm.quizzes = [];

    QuizzesService.getQuizzes($stateParams.topicId)
    .then(function(success){
      vm.quizzes = success.data;
    }, function(error){
      toastr.error('Something went Wrong', 'ERROR!');
    });

    vm.addQuiz = function (){
      var data = {
        quiz:{
          title: vm.quiz.title,
          passing_score: vm.quiz.passing_score
        }
      };

      QuizzesService.postQuiz($stateParams.topicId, data)
      .then(function(success){
        vm.quizzes.push(success.data);
        vm.title = "";
        vm.passing_score = "";
      }, function(error){
        toastr.error('Something went Wrong')
      });
    };
  }

}).call(this);
